{"version":3,"sources":["saga/index.ts","const.ts","reducers/index.ts","actions/index.ts","components/BarcodeTFApp.tsx","utils/index.ts","containers/indexTF.ts","index.tsx"],"names":["handleSomething","rootSaga","fork","AppStatus","DisplayConstraints","QVGA","facingMode","width","exact","height","VGA","HD","FULLHD","FourK","ideal","max","EightK","DisplayConstraintOptions","initialState","counter","status","barcode","execScan","select_start_x","select_start_y","select_end_x","select_end_y","inSelect","finSelect","reducer","state","action","gs","Object","assign","console","log","type","payload","Actions","createActions","args","captureVideoImageToCanvas","video","videoCaptureCanvas","document","createElement","videoWidth","videoHeight","getContext","drawImage","BarcodeTFApp2","count","videoResolution","colnum","rownum","showCode","showSS","showGrid","capture","track","focusChangeCycle","parentRef","React","imageRef1","imageRef2","videoRef","barcodeDisplayCanvasRef","controllerCanvasRef","statusCanvasRef","controllerDivRef","workerSSMaskMonitorCanvasRef","workerAreaCVCanvasRef","parentHeight","parentWidth","overlayWidth","overlayHeight","overlayXOffset","overlayYOffset","multiBarcodReader","MultiBarcodeReader","frame","fps","frameCountStartTime","Date","getTime","changeCameraResolution","resolution","current","srcObject","getTracks","map","s","stop","navigator","mediaDevices","getUserMedia","webCamPromise","audio","then","stream","getVideoTracks","imageCapture","ImageCapture","setState","Promise","resolve","reject","onloadedmetadata","all","res","checkParentSizeChanged","catch","error","requestScanBarcode","a","controller","captureCanvas","remove","window","requestAnimationFrame","this","thisTime","addInitializedListener","props","initialized","barcodePreviewCanvas","addWaitNextFrameListeners","addScanedBarcordListeners","barcodes","areas","init","getBoundingClientRect","bottom","top","right","left","Math","floor","findOverlayLocation","supportedConstraints","getSupportedConstraints","constraint","hasOwnProperty","initWorkerPromise","initWorker","constraintOptions","keys","v","key","text","value","colnumOptions","rownumOptions","style","position","ref","autoPlay","playsInline","muted","Dropdown","options","simple","item","onChange","e","Label","basic","size","color","onClick","newValue","previewCanvas","girdDrawCanvas","BarcodeTFApp","ConnectorTF","connect","dispatch","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.ef3017d3.chunk.js","sourcesContent":["import { fork } from 'redux-saga/effects';\n\nfunction* handleSomething() {\n}\n\nexport default function* rootSaga() {\n    yield fork(handleSomething)\n    \n}\n\n","\nexport const AppStatus = {\n    INITIALIZING: \"initializing\",\n    INITIALIZED : \"initialized\",\n    RUNNING     : \"running\",\n}\n\nexport const AIConfig = {\n\n    SPLIT_MARGIN: 0.2,\n    SPLIT_WIDTH: 300,\n    SPLIT_HEIGHT: 300,\n    TRANSFORMED_WIDTH: 300,\n    TRANSFORMED_HEIGHT: 300,\n    TRANSFORMED_MAX: 300,\n    CROP_MARGIN: 20,\n\n    SS_MODEL_PATH: '/WEB_MODEL/icnet_0300x0300_0.10/model.json',\n}\n\n\nexport const WorkerCommand = {\n    SET_OVERLAY  :  'set_overlay',\n    SCAN_BARCODE : 'scan_barcode',\n    PREDICT_AREA : 'predict_area',\n    DRAW_MASK    : 'draw_mask',\n    SCAN_BARCODES: 'scan_barcodes',\n}\n\nexport const WorkerResponse = {\n    NOT_PREPARED     : 'not_prepared',\n    INITIALIZED      : 'initialized',\n    SCANED_BARCODE   : 'scaned_barcode',\n    PREDICTED_AREA   : 'predicted_area',\n    DREW_MASK        : 'drew_mask',\n    SCANNED_BARCODES : 'scanned_barcodes',\n}\n\n/////////////////////////////\n////// ディスプレイ設定  ////\n/////////////////////////////\n\n\nexport const qvgaConstraints:MediaTrackConstraintSet = {\n    facingMode: \"environment\",\n    width: { exact: 320 },\n    height: { exact: 240 }\n};\n\nexport const vgaConstraints:MediaTrackConstraintSet = {\n    facingMode: \"environment\",\n    width: { exact: 640 },\n    height: { exact: 480 }\n};\n\nexport const hdConstraints:MediaTrackConstraintSet = {\n    facingMode: \"environment\",\n    width: { exact: 1280 },\n    height: { exact: 720 }\n};\n\nexport const fullHdConstraints:MediaTrackConstraintSet = {\n    facingMode: \"environment\",\n    width: { exact: 1920 },\n    height: { exact: 1080 }\n};\n\nexport const fourKConstraints:MediaTrackConstraintSet = {\n    facingMode: \"environment\",\n    width: { ideal: 2500, max: 4096 },\n    height: { ideal: 1600, max: 4096 }\n};\n\nexport const eightKConstraints:MediaTrackConstraintSet = {\n    facingMode: \"environment\",\n    width: { ideal: 7680 },\n    height: { ideal: 4320 }\n};\n\n\nexport const DisplayConstraints = {\n    QVGA:   qvgaConstraints,\n    VGA:    vgaConstraints,\n    HD:     hdConstraints,\n    FULLHD: fullHdConstraints,\n    FourK:  fourKConstraints,\n    EightK: eightKConstraints,\n} as const\n\nexport const DisplayConstraintOptions:{[key:string]:MediaTrackConstraintSet} = {\n    \"VGA\"    : DisplayConstraints.VGA,\n    \"HD\"     : DisplayConstraints.HD,\n    \"FULLHD\" : DisplayConstraints.FULLHD\n}\n\nexport const DisplayConstraint   = DisplayConstraints.FULLHD\n//export const DisplayConstraint = DisplayConstraints.HD\n//export const DisplayConstraint = DisplayConstraints.VGA\n","import { AppStatus } from \"../const\"\n\n\nexport interface GlobalState {\n    counter: number\n    status: string\n    barcode: string\n    execScan: boolean\n\n    select_start_x: number\n    select_start_y: number\n    select_end_x: number\n    select_end_y: number\n    inSelect : boolean\n    finSelect:boolean\n}\n\nexport const initialState = {\n    counter: 0,\n    status: AppStatus.INITIALIZING,\n    barcode: \"\",    \n    execScan: false,\n\n\n    select_start_x: 0,\n    select_start_y: 0,\n    select_end_x: 0,\n    select_end_y: 0,\n    inSelect : false,\n    finSelect: false,\n\n}\n\nconst reducer = (state: GlobalState=initialState, action:any) => {\n    var gs: GlobalState = Object.assign({},state)\n    gs.counter++\n    gs.execScan = false\n    console.log(action)    \n    switch (action.type) {\n        case 'INITIALIZED':\n            gs.status   = AppStatus.INITIALIZED\n            gs.execScan =  true\n            break\n\n        case 'SCANNED':\n            gs.status   = AppStatus.RUNNING\n            gs.execScan = true\n            gs.barcode  = action.payload\n            break\n\n        case 'START_SELECT':\n            gs.select_start_x = action.payload[0]\n            gs.select_start_y = action.payload[1]\n            break\n\n        case 'MOVE_SELECT':\n            gs.select_end_x = action.payload[0]\n            gs.select_end_y = action.payload[1]\n            gs.inSelect = true\n            break\n\n        case 'END_SELECT':\n            gs.select_end_x = action.payload[0]\n            gs.select_end_y = action.payload[1]\n            gs.inSelect     = false\n            gs.finSelect    = true\n            break\n                            \n    }\n    return gs\n}\n\nexport default reducer;\n","import { createActions } from 'redux-actions';\n\nexport const Actions = createActions(\n    {\n        'INITIALIZED' : (args) => (args),\n        'SCANNED'     : (args) => (args),\n        'START_SELECT'     : (...args) => (args),\n        'MOVE_SELECT'      : (...args) => (args),\n        'END_SELECT'       : (...args) => (args),\n    },\n)\n\n","import * as React from 'react';\nimport { GlobalState } from '../reducers';\nimport { AppStatus, DisplayConstraintOptions } from '../const';\nimport { findOverlayLocation, } from '../utils'\nimport { Dropdown, Label } from 'semantic-ui-react'\nimport { MultiBarcodeReader } from 'multi-barcode-scanner-js'\ninterface BarcodeTFAppState{\n    count: number,\n    videoResolution:string,\n    colnum:number,\n    rownum:number,\n    showCode:boolean,\n    showSS:boolean,\n    showGrid:boolean,\n\n    // @ts-ignore\n    capture: ImageCapture|null,\n    track:MediaStreamTrack|null,\n    focusChangeCycle: number\n}\n\nconst captureVideoImageToCanvas = (video:HTMLVideoElement):HTMLCanvasElement => {\n    const videoCaptureCanvas    = document.createElement(\"canvas\");\n    videoCaptureCanvas.width = video.videoWidth\n    videoCaptureCanvas.height = video.videoHeight\n\n    const tmpCtx                = videoCaptureCanvas.getContext('2d')!\n    tmpCtx.drawImage(video, 0, 0, videoCaptureCanvas.width, videoCaptureCanvas.height);\n    return videoCaptureCanvas\n}\n\n\nconst captureVideoImageToCanvas2 = (imageBitmap: ImageBitmap, video:HTMLVideoElement):HTMLCanvasElement => {\n    const videoCaptureCanvas    = document.createElement(\"canvas\");\n    // videoCaptureCanvas.width = imageBitmap.width\n    // videoCaptureCanvas.height = imageBitmap.height\n    videoCaptureCanvas.width = video.width\n    videoCaptureCanvas.height = video.height\n\n    const tmpCtx                = videoCaptureCanvas.getContext('2d')!\n    tmpCtx.drawImage(imageBitmap, 0, 0, videoCaptureCanvas.width, videoCaptureCanvas.height);\n    console.log(\"cap2:\", videoCaptureCanvas.width, videoCaptureCanvas.height)\n    return videoCaptureCanvas\n}\n\n\nclass BarcodeTFApp2 extends React.Component {\n    state: BarcodeTFAppState = {\n        count: 0,\n        videoResolution: \"VGA\",\n        colnum: 1,\n        rownum: 1,\n        showCode: true,\n        showSS: false,\n        showGrid: false,\n        capture: null,\n        track: null,\n        focusChangeCycle:0,\n    }\n\n\n    ////////////////////\n    // HTML Component //\n    ////////////////////\n    parentRef = React.createRef<HTMLDivElement>()\n    imageRef1 = React.createRef<HTMLImageElement>()\n    imageRef2 = React.createRef<HTMLImageElement>()\n    videoRef  = React.createRef<HTMLVideoElement>()\n    barcodeDisplayCanvasRef = React.createRef<HTMLCanvasElement>()\n    controllerCanvasRef = React.createRef<HTMLCanvasElement>()\n    statusCanvasRef     = React.createRef<HTMLCanvasElement>()\n    controllerDivRef = React.createRef<HTMLDivElement>()\n    workerSSMaskMonitorCanvasRef = React.createRef<HTMLCanvasElement>()\n    workerAreaCVCanvasRef        = React.createRef<HTMLCanvasElement>()\n    ////////////////////\n    // Component Size //\n    ////////////////////\n    videoHeight = 0\n    videoWidth = 0\n    parentHeight = 0\n    parentWidth = 0\n\n    overlayWidth = 0\n    overlayHeight = 0\n    overlayXOffset = 0\n    overlayYOffset = 0\n\n\n\n    multiBarcodReader = new MultiBarcodeReader()\n\n\n    /**\n       * FPS測定用\n       */\n    frame = 0\n    fps   = 0.0\n    frameCountStartTime = new Date().getTime()\n    gameLoop() {\n        this.frame++\n        const thisTime = new Date().getTime()\n        if (thisTime - this.frameCountStartTime > 1000) {\n            const fps = (this.frame / (thisTime - this.frameCountStartTime)) * 1000\n            this.frameCountStartTime = new Date().getTime()\n            this.frame = 0\n            this.fps = fps\n        }\n    }\n\n    /**\n     * ワーカーの初期化\n     */\n    async initWorker() {\n        this.multiBarcodReader.addInitializedListener(()=>{\n            const props = this.props as any\n            props.initialized()\n            console.log(\"multi barcode reader module loaeded\")\n            this.requestScanBarcode()\n            this.multiBarcodReader.barcodePreviewCanvas = this.state.showCode ? this.workerAreaCVCanvasRef.current! : null\n        })\n        this.multiBarcodReader.addWaitNextFrameListeners(()=>{this.requestScanBarcode()})\n        this.multiBarcodReader.addScanedBarcordListeners((barcodes:string[], areas:number[][])=>{\n//            console.log(\"SCANNED!!!\")\n        })\n//        this.multiBarcodReader.barcodePreviewCanvas = this.workerAreaCVCanvasRef.current!\n        this.multiBarcodReader.init()\n        return\n    }\n\n    /**\n     * HTMLコンポーネントに位置計算\n     */\n    private checkParentSizeChanged(video: HTMLVideoElement) {\n        // サイズ算出\n        this.videoHeight = video.videoHeight\n        this.videoWidth  = video.videoWidth\n\n        let parentHeight = video.getBoundingClientRect().bottom - video.getBoundingClientRect().top\n        const parentWidth  = video.getBoundingClientRect().right - video.getBoundingClientRect().left\n        // console.log(\"--- checkParentSizeChanged ---\")\n        // console.log(video.getBoundingClientRect().left, video.getBoundingClientRect().top, video.getBoundingClientRect().right, video.getBoundingClientRect().bottom)\n        // console.log(parentWidth, parentHeight)\n\n        \n        // if(parentHeight === 0){\n            parentHeight = (parentWidth/this.videoWidth) * this.videoHeight\n        // }\n\n        this.parentHeight = parentHeight\n        this.parentWidth = parentWidth\n        // const { overlayWidth, overlayHeight, overlayXOffset, overlayYOffset } = findOverlayLocation(this.parentRef.current!, this.videoWidth, this.videoHeight)\n        const { overlayWidth, overlayHeight, overlayXOffset, overlayYOffset } = findOverlayLocation(this.parentWidth, this.parentHeight, this.videoWidth, this.videoHeight)\n        this.overlayWidth = overlayWidth\n        this.overlayHeight = overlayHeight\n        this.overlayXOffset = overlayXOffset\n        this.overlayYOffset = overlayYOffset\n\n\n        this.workerAreaCVCanvasRef.current!.width  = this.overlayWidth\n        this.workerAreaCVCanvasRef.current!.height = this.overlayHeight\n        this.workerSSMaskMonitorCanvasRef.current!.width  = this.overlayWidth\n        this.workerSSMaskMonitorCanvasRef.current!.height = this.overlayHeight\n        this.controllerCanvasRef.current!.width  = this.overlayWidth\n        this.controllerCanvasRef.current!.height = this.overlayHeight\n\n\n        // const status = this.statusCanvasRef.current!\n        // const ctx = status.getContext(\"2d\")!\n        // ctx.clearRect(0,0,status.width, status.height)\n        // ctx.fillText(`${this.videoWidth}, ${this.videoHeight}, `,100,30)\n        // ctx.fillText(`${video.width}, ${video.height}, `,100,45)\n        // ctx.fillText(`${parentWidth}, ${parentHeight}, `,100,60)\n        // ctx.fillText(`${this.overlayXOffset}, ${this.overlayYOffset}, `,100,90)\n        // ctx.fillText(`${this.overlayWidth}, ${this.overlayHeight}, `,100,120)\n\n        // console.log(`>>>>1   ${this.videoWidth}, ${this.videoHeight}, `)\n        // console.log(`>>>>2   ${video.width}, ${video.height}, `)\n        // console.log(`>>>>3   ${parentWidth}, ${parentHeight}, `)\n        // console.log(`>>>>4   ${this.overlayXOffset}, ${this.overlayYOffset}, `)\n        // console.log(`>>>>5   ${this.overlayWidth}, ${this.overlayHeight}, `)\n        \n        // console.log(`>>>> 6  ${video.getBoundingClientRect().bottom} - ${video.getBoundingClientRect().top}`)\n        // console.log(`>>>> 6  ${video.getBoundingClientRect().right} - ${video.getBoundingClientRect().left}`)\n\n    }\n\n    /**\n     * マウント時の処理\n     * モデルのロード、カメラの準備ができたらイベント発行する\n     */\n    componentDidMount() {\n        console.log('Initializing')\n        let supportedConstraints = navigator.mediaDevices.getSupportedConstraints();\n        for (let constraint in supportedConstraints) {\n            if (supportedConstraints.hasOwnProperty(constraint)) {\n                console.log(\"allowed constraint:\",constraint)\n            }\n          }\n\n        // console.log('>>>>>>>>>>>>>>>>>>>>>>SUM:',sum(1,2))\n        // const t = new TestTest()\n        // t.init()\n\n        // const t = new TestWebWorker()\n        // t.init()\n\n        const initWorkerPromise = this.initWorker()\n\n        \n\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n            const webCamPromise = navigator.mediaDevices\n                .getUserMedia({\n                    audio: false,\n                    video: DisplayConstraintOptions[this.state.videoResolution]\n                })\n                .then(stream => {\n                    console.log(this.videoRef)\n                    this.videoRef.current!.srcObject = stream;\n                    \n                    const track = stream.getVideoTracks()[0];\n                    //@ts-ignore\n                    const imageCapture = new ImageCapture(track);\n                    this.setState({\n                        capture: imageCapture,\n                        track:track\n                    })\n                    return new Promise((resolve, reject) => {\n                        this.videoRef.current!.onloadedmetadata = () => {\n                            console.log(\"resolved\")\n                            resolve();\n                        };\n                    });\n                });\n            \n            Promise.all([initWorkerPromise, webCamPromise])\n                .then((res) => {\n                    console.log('Camera and model ready!')\n                })\n                .catch(error => {\n                    console.error(error);\n                });\n        }\n    }\n\n    changeCameraResolution = (resolution:string) =>{\n        (this.videoRef.current!.srcObject as MediaStream ).getTracks().map(s=>s.stop())\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n            const webCamPromise = navigator.mediaDevices\n                .getUserMedia({\n                    audio: false,\n                    video: DisplayConstraintOptions[resolution]\n                })\n                .then(stream => {\n                    console.log(this.videoRef)\n                    this.videoRef.current!.srcObject = stream;\n\n                    const track = stream.getVideoTracks()[0];\n                    //@ts-ignore\n                    const imageCapture = new ImageCapture(track);\n                    this.setState({\n                        capture: imageCapture,\n                        track:track\n                    })\n\n                    return new Promise((resolve, reject) => {\n                        this.videoRef.current!.onloadedmetadata = () => {\n                            resolve();\n                        };\n                    });\n                });\n            \n            Promise.all([webCamPromise])\n                .then((res) => {\n                    console.log('Camera and model ready!')\n                    const video = this.videoRef.current!\n                    this.checkParentSizeChanged(video)\n                    this.setState({videoResolution:resolution})\n                })\n                .catch(error => {\n                    console.error(error);\n                });\n        }           \n\n    }\n\n\n    requestScanBarcode = async () => {\n\n\n        //@ts-ignore\n        // this.state.track!.applyConstraints({advanced : [{focusMode: \"manual\", focusDistance: 0.2+0.2*this.state.focusChangeCycle}]});\n        //@ts-ignore\n        //this.state.track!.applyConstraints({advanced : [{pointsOfInterest: [0.9,0.9]}]});\n\n        console.log('requestScanBarcode')\n        const video = this.videoRef.current!\n        const controller = this.controllerCanvasRef.current!\n        controller.width = this.overlayWidth\n        controller.height = this.overlayHeight\n\n        // try{\n        //     this.state.capture.takePhoto().then(\n        //         (blob:Blob) => createImageBitmap(blob).then(\n        //             imageBitmap => {\n        //                 const captureCanvas = captureVideoImageToCanvas2(imageBitmap, video)\n        //                 this.multiBarcodReader.requestScanBarcode(captureCanvas, this.state.colnum, this.state.rownum)\n        //                 captureCanvas.remove()\n        //             }).catch((error:any) =>{\n        //                 console.error(\"aaa\", error);\n        //                 window.requestAnimationFrame(this.requestScanBarcode);\n        //             })\n        //         ).catch((error:any) =>{\n        //             console.error(\"bbb\", error);\n        //             window.requestAnimationFrame(this.requestScanBarcode);\n        //         })\n        // }catch(e){\n        //     console.error(e);\n        //     window.requestAnimationFrame(this.requestScanBarcode);\n        // }\n\n        const captureCanvas = captureVideoImageToCanvas(video)\n        if(captureCanvas.width === 0){\n            captureCanvas.remove()\n            window.requestAnimationFrame(this.requestScanBarcode);\n            return\n        }\n\n        this.multiBarcodReader.requestScanBarcode(captureCanvas, this.state.colnum, this.state.rownum)\n        captureCanvas.remove()\n\n\n        if(this.state.focusChangeCycle>10){\n            this.state.focusChangeCycle=0\n            // this.setState({\n            //     focusChangeCycle: 0\n            // })\n        }else{\n            this.state.focusChangeCycle += 1\n            // this.setState({\n            //     focusChangeCycle: this.state.focusChangeCycle+1\n            // })\n        }\n\n    }\n\n\n    render() {\n        const gs = this.props as GlobalState\n        const video = this.videoRef.current!\n\n        if(gs.status === AppStatus.INITIALIZED){\n            console.log('initialized')\n            this.checkParentSizeChanged(video)\n        }\n\n        const constraints = Object.keys(DisplayConstraintOptions)\n        const constraintOptions = constraints.map(v =>{\n            return {key:v, text:v, value:v}\n        })\n\n        const colnumOptionList = [1,2,3]\n        const colnumOptions = colnumOptionList.map(v =>{\n            return {key:v, text:v, value:v}\n        })\n        const rownumOptionList = [1,2,3]\n        const rownumOptions = rownumOptionList.map(v =>{\n            return {key:v, text:v, value:v}\n        })\n\n        return (\n            <div style={{ width: \"100%\", height: this.parentHeight, position: \"relative\", top: 0, left: 0, }} ref={this.parentRef} >\n                {/* <img src=\"imgs/barcode01.png\" alt=\"barcode\" ref={this.imageRef1} />\n                <img src=\"imgs/barcode02.png\" alt=\"barcode\" ref={this.imageRef2} /> */}\n                <video\n                    autoPlay\n                    playsInline\n                    muted\n                    ref={this.videoRef}\n                    //style={{ position: \"absolute\", top: this.overlayYOffset, left: this.overlayXOffset, width:this.overlayWidth, height:this.overlayHeight}}\n                    \n                    style={{ width: \"100%\", height: \"100%\", position: \"absolute\", top: 0, left: 0, }}\n                />\n                <canvas\n                    ref = {this.workerSSMaskMonitorCanvasRef}\n                    style={{ position: \"absolute\", top: this.overlayYOffset, left: this.overlayXOffset, width:this.parentWidth, height:this.parentHeight}}\n                />\n                <canvas\n                    ref = {this.workerAreaCVCanvasRef}\n                    style={{ position: \"absolute\", top: this.overlayYOffset, left: this.overlayXOffset, width:this.parentWidth, height:this.parentHeight}}\n                />\n                <canvas\n                    ref={this.barcodeDisplayCanvasRef}\n                    style={{ position: \"absolute\", top: this.overlayYOffset, left: this.overlayXOffset, width:this.parentWidth, height:this.parentHeight}}\n                />\n\n                <canvas\n                    ref={this.controllerCanvasRef}\n                    style={{ position: \"absolute\", top: this.overlayYOffset, left: this.overlayXOffset, width:this.parentWidth, height:this.parentHeight}}\n                />\n\n                <canvas\n                    ref={this.statusCanvasRef}\n                    style={{ position: \"absolute\", top: this.overlayYOffset, left: this.overlayXOffset, width:this.parentWidth, height:this.parentHeight}}\n                />\n\n\n                <div \n                    ref={this.controllerDivRef}\n                    style={{ position: \"absolute\", top: this.overlayYOffset, left: this.overlayXOffset, width:this.parentWidth, height:this.parentHeight}}\n                >\n                    <Dropdown text='Resolution' options={constraintOptions } simple item onChange={(e, { value }) => {\n                        this.changeCameraResolution(value as string)\n                    }}/>\n                    <Dropdown text='col' options={colnumOptions} simple item  onChange={(e, { value }) => {\n                        this.setState({colnum:value as number})\n                    }}/>\n                    <Dropdown text='row' options={rownumOptions} simple item onChange={(e, { value }) => {\n                        this.setState({rownum:value as number})\n                    }}/>\n                    <Label basic size=\"tiny\" color={this.state.showCode?\"red\":\"grey\"} onClick={()=>{\n                        const newValue = !this.state.showCode\n                        // this.workerAreaCVCanvasRef.current!.width  = this.overlayWidth\n                        // this.workerAreaCVCanvasRef.current!.height = this.overlayHeight\n                        this.multiBarcodReader.barcodePreviewCanvas = newValue ? this.workerAreaCVCanvasRef.current! : null\n                        this.setState({showCode:newValue})\n                    }}>code</Label>\n                    <Label basic size=\"tiny\" color={this.state.showSS?\"red\":\"grey\"} onClick={()=>{\n                        const newValue = !this.state.showSS\n                        // this.workerSSMaskMonitorCanvasRef.current!.width  = this.overlayWidth\n                        // this.workerSSMaskMonitorCanvasRef.current!.height = this.overlayHeight\n                        this.multiBarcodReader.previewCanvas = newValue ? this.workerSSMaskMonitorCanvasRef.current! : null\n                        this.setState({showSS:newValue})\n                    }}>ss</Label>\n                    <Label basic size=\"tiny\" color={this.state.showGrid?\"red\":\"grey\"} onClick={()=>{\n                        const newValue = !this.state.showGrid\n                        // this.controllerCanvasRef.current!.width  = this.overlayWidth\n                        // this.controllerCanvasRef.current!.height = this.overlayHeight\n                        this.multiBarcodReader.girdDrawCanvas = newValue ? this.controllerCanvasRef.current! : null\n                        this.setState({showGrid:!this.state.showGrid})\n\n\n                        // const capabilities = this.state.track!.getCapabilities();\n                        // console.log(capabilities)\n                        // if(newValue){\n                        //     //@ts-ignore\n                        //     // this.state.track!.applyConstraints({advanced : [{focusMode: \"manual\", focusDistance: 3}]});\n                        //     //@ts-ignore\n                        //     this.state.track!.applyConstraints({advanced : [{exposureMode: \"manual\", exposureTime: 40000}]});\n                        // }else{\n                        //     //@ts-ignore\n                        //     // this.state.track!.applyConstraints({advanced : [{focusMode: \"manual\", focusDistance: 1}]});\n                        //     //@ts-ignore\n                        //     this.state.track!.applyConstraints({advanced : [{exposureMode: \"manual\", exposureTime: 1}]});\n                        // }\n\n                    }}>grid</Label>\n\n                </div>\n            </div>\n\n        )\n    }\n\n}\n\n\n\nclass BarcodeTFApp extends React.Component {\n    render() {\n        const props = this.props as any\n        return(\n            <div>\n                {/* <Label>\n                    A\n                </Label>\n                <br />\n                <Label>\n                    b\n                </Label> */}\n                <BarcodeTFApp2 {...props}/>\n            </div>\n        )\n    }\n}\n\nexport default BarcodeTFApp;","\nexport const with_time = (name:string, func:any, out:boolean) =>{\n    const start = performance.now();\n    func();\n    const end = performance.now();\n    \n    const elapsed = (end - start);\n    const elapsedStr = elapsed.toFixed(3);\n    if(out){\n        console.log(`[WITH TIME] ${name}: ${elapsedStr} ms`);\n    }\n}\n\nexport const with_time_async = async(name:string, func:any, out:boolean) =>{\n    const start = performance.now();\n    await func();\n    const end = performance.now();\n    \n    const elapsed = (end - start);\n    const elapsedStr = elapsed.toFixed(3);\n    if(out){\n        console.log(`[WITH TIME] ${name}: ${elapsedStr} ms`);\n    }\n}\n\n\n\n\ninterface OverlayLocation {\n    overlayWidth: number\n    overlayHeight: number\n    overlayXOffset: number\n    overlayYOffset: number\n}\n\nexport function findOverlayLocation(parentWidth:number, parentHeight:number, videoWidth: number, videoHeight: number): OverlayLocation {\n    const parentAspect = parentWidth / parentHeight\n    const videoAspect = videoWidth / videoHeight\n\n    let overlayHeight = 0\n    let overlayWidth = 0\n    let overlayXOffset = 0\n    let overlayYOffset = 0\n\n    if (parentAspect > videoAspect) {\n        //キャンバスのほうが横長　➔　キャンバスの縦で律速\n        // \n        overlayHeight = parentHeight\n        overlayYOffset = 0\n        overlayWidth = overlayHeight * (videoWidth / videoHeight)\n        overlayXOffset = (parentWidth - overlayWidth) / 2\n    } else {\n        //キャンバスのほうが縦長　➔　キャンバスの横で律速\n        overlayWidth = parentWidth\n        overlayXOffset = 0\n        overlayHeight = overlayWidth * (videoHeight / videoWidth)\n        overlayYOffset = (parentHeight - overlayHeight) / 2\n    }\n    overlayWidth   = Math.floor(overlayWidth)\n    overlayHeight  = Math.floor(overlayHeight)\n    overlayXOffset = Math.floor(overlayXOffset)\n    overlayYOffset = Math.floor(overlayYOffset)\n    //console.log('------------', overlayWidth, overlayHeight, overlayXOffset, overlayYOffset)\n    return {  overlayWidth, overlayHeight, overlayXOffset, overlayYOffset }\n\n}\n","import { Dispatch } from 'redux';\nimport { connect } from 'react-redux'\n\nimport { Actions } from '../actions'\nimport { GlobalState } from '../reducers';\nimport BarcodeTFApp from '../components/BarcodeTFApp';\n\nexport interface Props {\n}\n\nfunction mapStateToProps(state:GlobalState) {\n  return state\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n  return {\n    initialized:      (args:string) => {dispatch(Actions.initialized(args))},\n  }\n}\n\nconst ConnectorTF = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(BarcodeTFApp);\n\nexport default ConnectorTF;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\n\nimport createSagaMiddleware from 'redux-saga';\nimport rootSaga from './saga';\nimport reducer from './reducers';\nimport ConnectorTF from './containers/indexTF'\n\n\nconst sagaMiddleware = createSagaMiddleware();\nconst store = createStore(\n  reducer,\n  applyMiddleware(\n    sagaMiddleware\n  )\n);\nsagaMiddleware.run(rootSaga);\n\n\nReactDOM.render(\n    <Provider store={store}>\n      {(()=>{\n        return <ConnectorTF/>\n      })()}\n\n    </Provider>\n    ,document.getElementById('root'));\n\n"],"sourceRoot":""}